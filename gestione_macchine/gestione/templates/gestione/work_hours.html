<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrazione Ore Lavorate</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
</head>
<body>
    <div id='#responseMessage'></div>
    <div class="container mt-5">
        <h1>Registrazione Ore Lavorate</h1>
        
    

        <form id ="AggiungiOre"  method="post">
            {% csrf_token %}
            <small class="form-text text-muted" title="Formato: DD/MM/YYYY">formato Data(MM/DD/YYYY)</small>
            {{ form.as_p }}
              <small class="form-text text-muted" title="Formato: DD/MM/YYYY">formato Data(MM/DD/YYYY)</small>
             <button type="submit" class="btn btn-primary">Invia</button>
        </form>

       
    </div>
   <script> 
   
    
    $(document).ready(function() {
    
        // Aggiungiamo un gestore di eventi per l'invio del form

        $('#AggiungiOre').on('submit', function(event) { // questo AJAX usa jQuery

            

            event.preventDefault();


            // Iniziamo una richiesta AJAX

            $.ajax({

                // Indichiamo il tipo di richiesta HTTP (in questo caso POST)

                type: 'POST',

                // Prendiamo l'URL dal form (dove inviare i dati)

                url: $(this).attr('action'),

                // Serializziamo i dati del form per inviarli al server

                data: $(this).serialize(),

                // Funzione da eseguire se la richiesta ha successo

                success: function(response) {

                    // Mostriamo un messaggio di successo all'utente

                    $('#responseMessage').html('<p>Macchina aggiunta con successo!</p>');

                },

                // Funzione da eseguire se si verifica un errore nella richiesta

                error: function(xhr, status, error) {

                    // Mostriamo un messaggio di errore all'utente

                    $('#responseMessage').html('<p>Errore: ' + xhr.responseText + '</p>');

                }

            });

        });

    });

 

</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>