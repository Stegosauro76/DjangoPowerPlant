
   
   <!DOCTYPE html>

   <html lang="it">
   
   <head>
   
       <meta charset="UTF-8">
   
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
       <title>Aggiungi Turno</title>
   
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
   
       <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
   
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
       <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   
   </head>
   
   <body>
   
       <div class="container fluid mt-5 ">
   
   
           <h1 class="text-center text-dark">Aggiungi Turno</h1>
   
           
           <div id="responseMessage"></div>
           
           <form id="AggiungiOre" method="post" class="bg-light p-4 rounded shadow">
   
               {% csrf_token %}
               <small class="form-text text-muted" title="Formato: DD/MM/YYYY">formato Data(MM/DD/YYYY)</small>
               {{ form.as_p }}
               
              
               <button type="submit" class="btn btn-dark">Aggiungi</button>
   
           </form>
   
           
   
           <a href="{% url 'lista_turni' %}" class="d-block text-center mt-3 text-dark">Torna alla lista turni</a>
   
       </div>
   
   
   

   <script>
    $(document).ready(function() {
    
        // Aggiungiamo un gestore di eventi per l'invio del form

        $('#AggiungiOre').on('submit', function(event) { // questo AJAX usa jQuery

            

            event.preventDefault();


            // Iniziamo una richiesta AJAX

            $.ajax({

                // Indichiamo il tipo di richiesta HTTP (in questo caso POST)

                type: 'POST',

                // Prendiamo l'URL dal form (dove inviare i dati)

                url: $(this).attr('action'),

                // Serializziamo i dati del form per inviarli al server

                data: $(this).serialize(),

                // Funzione da eseguire se la richiesta ha successo

                success: function(response) {

                    // Mostriamo un messaggio di successo all'utente

                    $('#responseMessage').html('<p>Turno aggiunto con successo!</p>');

                },

                // Funzione da eseguire se si verifica un errore nella richiesta

                error: function(xhr, status, error) {

                    // Mostriamo un messaggio di errore all'utente

                    $('#responseMessage').html('<p>Errore: ' + xhr.responseText + '</p>');

                }

            });

        });

    });

 

</script>
    
</body>
</html>